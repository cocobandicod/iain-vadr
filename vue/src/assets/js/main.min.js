var scriptElement = document.currentScript;
var URL = scriptElement.dataset.url;

$(document).ready(function() {
    const cache = {};

    $(document).on('click', '.menu', function(e) {
        e.preventDefault();  // Mencegah perilaku default dari tag <a>

        const $this = $(this);
        const key = $this.data('key');
        const title = $this.data('title');

        // Mengatur kelas aktif
        $('.menu').removeClass('active');
        $this.addClass('active');

        // Mengubah elemen <title>
        document.title = title;

        // Mengecek cache terlebih dahulu
        if (cache[key]) {
            $('.router').html(cache[key]);
            return;
        }

        $.ajax({
            type: 'POST',
            url: URL + 'config/router',
            data: { menu: key },
            success: function(data) {
                cache[key] = data;
                $('.router').html(data);
            },
            error: function() {
                $('.router').html('<p>Terjadi kesalahan saat memuat halaman.</p>');
            }
        });
    });
});